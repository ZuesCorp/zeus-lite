<body>
  <div class="container">
    <h1>Zeus Lite</h1>
    <p class="subtitle">For solo eCommerce sellers who need products people actually buy.</p>

    <button id="genBtn" type="button">Generate Product</button>

    <div id="loading" class="hidden">
      <div class="spinner"></div>
      <p>Finding best product…</p>
    </div>

    <div id="result" class="hidden">
      <h2 id="ideaTitle"></h2>

      <div class="idea-block">
        <strong>Profit potential:</strong>
        <div id="profit"></div>
      </div>

      <div class="idea-block">
        <strong>Why it’s moving:</strong>
        <div id="why"></div>
      </div>

      <div class="idea-block">
        <strong>Best ad angle:</strong>
        <div id="angle"></div>
      </div>

      <div class="idea-block">
        <strong>Purchase likelihood:</strong>
        <div id="likelihood"></div>
      </div>
    </div>

    <div id="limitMessage" class="hidden">
      <h2>Daily limit reached</h2>
      <p>You’ve hit your max generation limit for today.<br />Try again tomorrow for more generations.</p>
    </div>
  </div>

  <script src="app.js"></script>
  <script>
    (function () {
      const genBtn = document.getElementById("genBtn");
      const loading = document.getElementById("loading");
      const result = document.getElementById("result");
      const limitMessage = document.getElementById("limitMessage");

      const ideaTitle = document.getElementById("ideaTitle");
      const profit = document.getElementById("profit");
      const why = document.getElementById("why");
      const angle = document.getElementById("angle");
      const likelihood = document.getElementById("likelihood");

      function show(el){ el.classList.remove("hidden"); }
      function hide(el){ el.classList.add("hidden"); }

      async function generate() {
        hide(result);
        hide(limitMessage);
        show(loading);
        genBtn.disabled = true;

        try {
          // IMPORTANT:
          // This assumes your existing app.js exposes a function you already use to generate.
          // If your app.js uses a different function name, tell me what it is and I’ll wire it exactly.
          const data = await window.ZeusLiteGenerate?.(); // <-- expects an object back

          // If your generator returns "limit reached" in a different way, adjust here:
          if (data?.limitReached) {
            hide(loading);
            show(limitMessage);
            return;
          }

          ideaTitle.textContent = data?.title || "Product Idea";
          profit.textContent = data?.profit || "";
          why.textContent = data?.why || "";
          angle.textContent = data?.angle || "";
          likelihood.textContent = data?.likelihood || "";

          hide(loading);
          show(result);
        } catch (e) {
          console.error(e);
          hide(loading);
          // fallback basic message:
          limitMessage.querySelector("h2").textContent = "Error";
          limitMessage.querySelector("p").textContent = "Something went wrong. Try again.";
          show(limitMessage);
        } finally {
          genBtn.disabled = false;
        }
      }

      genBtn.addEventListener("click", generate);
    })();
  </script>
</body>
